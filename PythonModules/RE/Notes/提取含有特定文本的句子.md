# Python-提取出文本中含有特定字符串的方法

> 🔗 原文链接： [https://blog.csdn.net/zkw_1998/arti...](https://blog.csdn.net/zkw_1998/article/details/104928592)

今天搞了一天的文本处理，发现python真的太适合做数据处理了。废话不多说，一起学习吧！

#### 1.我的原始数据是这样的，如图

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=Nzc0NTRmMmIzYmQ4YjFhNTI4ZTc5ZmUzMTNiMmIwYjFfMkNKZ1ZEV2FwdlJNbVVvSzJTaEw1RkRLQ2hpZFN1M0NfVG9rZW46Ym94Y25rS3VMTHNzWVRTeUJsOXk3MVlpZmxoXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

#### 2.如果要提取每行含有pass的 [字符串 ](https://so.csdn.net/so/search?q=%E5%AD%97%E7%AC%A6%E4%B8%B2&spm=1001.2101.3001.7020)，代码如下：

```Plaintext
import re

filepath = "E:/untitled1/analyze_log/test.log"
txt = open(filepath, "r").read()

result=""
test_text = re.findall("..............+pass", txt)#取出每行含有pass的文本
result = result +'\n'.join(test_text)#换行输出
print(result)
```

#### 3.执行上面代码，可以取出每行含有pass的文本，如图：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=YjhkZDgzZmE3ODg4YTU2MmZjYzYxNmU0MGEyODAxOWVfVTBGVTRqZ0x2VjZyMUdFODVlYkNHUEdYVUgwVVp1a0lfVG9rZW46Ym94Y243N3BEQVNRd0pZM0NqbllCRnpXTm5jXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

#### 4.其实我真正要提取的是每行类似上图红色框内的字符串，代码实现如下：

```Plaintext
import re

filepath = "E:/untitled1/analyze_log/test.log"
txt = open(filepath, "r").read()

result=""
test_text = re.findall("..............+pass", txt)#取出每行含有pass的文本
result = result +'\n'.join(test_text)#换行输出
del_num = re.sub("\d+ ", "", result)#去掉每行行首的数字
del_awake = del_num.replace("awake", "")#去掉awake
del_commd = del_awake.replace("commd", "")#去掉commd
del_string1 = re.sub("-a+\d\d\d\d-\d.wav", "", del_commd)#去掉-a0023-1.wav类型的字符串
del_string2 = re.sub("-a+\d\d\d\d.wav", "", del_string1)#去掉-a0016.wav类型的字符串
print(del_string2)
```

#### 5.执行上面代码，可以取出最后我需要的文本，如图：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MmMwZTM4MTQ1NTZjYTA1NzY0NTI3YzNlODAyZmMxMjVfYVV5SkxHOU9oTlJLV3gxRnR1NVVjd3NtdERreXpYVFJfVG9rZW46Ym94Y25JMEpmM3E1VDMzYTJZeE9NTXhPbjRlXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

#### 6.拓展

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=YjJkNzc2MTVkOGY4MzAyN2IxMzBlMDg4OTAxMzA3NzBfcWN5ZXQ0TXFGUk45cTFVN0xoZTJrV0tDRGFsY3JHb1VfVG9rZW46Ym94Y25GYXA2OHZsTk80VjZKZjRnN2F4VGtoXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

#### 7.示例代码

```Plaintext
import re

str = 'Hello123/World 45_?6bye'
result1 = re.findall('\d',str)#\d匹配任何十进制数
result2 = re.findall('\d+',str)#\d+可匹配一位或多位数字使用
result3 = re.findall('\D',str)#\d匹配非数字字符任何十进制数
result4 = re.findall('\w',str)#\w匹配任何字母数字字符，包括下划线在内
result5 = re.findall('\W',str)#\W匹配非任何字母数字字符，包括下划线在内
result6 = re.findall('\s',str)#\s匹配任何空白字符
result7 = re.findall('\S',str)#\S匹配非任何空白字符
result8 = re.findall('\AHello',str)#\A仅匹配字符串开头
result9 = re.findall('bye\Z',str)#\Z仅匹配字符串结尾
print(result1)
print(result2)
print(result3)
print(result4)
print(result5)
print(result6)
print(result7)
print(result8)
print(result9)
```

接下来会更几篇关于文本处理的博客，一边学习一边记笔记。加油！

### 20201228更新

由于最近对很多文本进行处理了，发现有更简单的方法处理，所以前来更新~

##### 1.代码如下：

```Plaintext
filepath = "E:/untitled1/analyze_log/test.log"
lines = open(filepath, "r",encoding="UTF-8",errors="ignore").readlines()
for line in lines:
    if 'pass' in line:
        print(line)
```

##### 2.运行结果如下：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MDgzMTJjYjVhOWZjYTViOWIyOTc2YjExNzk4N2FmMzZfWTVNcmlLWVJBcWxFWDNVSzA1MElTRW5zZnFrWjZpcFZfVG9rZW46Ym94Y25iNURHWjBuQW5rMzR5bXE4MGVDRGVnXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

##### 3.如果想要取出我想要的那一段文本，也可以更简单~代码如下：

```Plaintext
filepath = "E:/untitled1/analyze_log/test.log"
lines = open(filepath, "r",encoding="UTF-8",errors="ignore").readlines()
for line in lines:
    if 'pass' in line:
        filename = line.split(' ')[2]
        key = filename.split('-a')[0]
        result = line.split(' ')[3]
        print(key+' '+result)
```

##### 4.运行效果如下：

![](https://fjjwhjwd3p.feishu.cn/space/api/box/stream/download/asynccode/?code=MjEzMGYzY2RiYWVlOGRmMTY5YzUyM2ZlMTE0YjNkZDdfeWlUWnZNcHUxV1F2d1J1ZDI2SWxrdUp4ZDlxTHFuTXZfVG9rZW46Ym94Y24yRHpmR0I0SGNOSWtoQVo3T2pYdHJlXzE2Njk1NjQzODY6MTY2OTU2Nzk4Nl9WNA)

##### 加油~
