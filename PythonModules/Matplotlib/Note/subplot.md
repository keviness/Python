# Matplotlib subplot()函数用法详解

在使用 Matplotlib 绘图时，我们大多数情况下，需要将一张画布划分为若干个子区域，之后，我们就可以在这些区域上绘制不用的图形。在本节，我们将学习如何在同一画布上绘制多个子图。

`matplotlib.pyplot`模块提供了一个 subplot() 函数，它可以均等地划分画布，该函数的参数格式如下：
plt.subplot(nrows, ncols, index)

nrows 与 ncols 表示要划分几行几列的子区域（nrows*nclos表示子图数量），index 的初始值为1，用来选定具体的某个子区域。

例如： subplot(233)表示在当前画布的右上角创建一个两行三列的绘图区域（如下图所示），同时，选择在第 3 个位置绘制子图。

![subplot()函数示意图](http://c.biancheng.net/uploads/allimg/210907/12534L438-0.gif)
图1：示意图

如果新建的子图与现有的子图重叠，那么重叠部分的子图将会被自动删除，因为它们不可以共享绘图区域。

<pre class="python sh_python snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><p><span class="sh_preproc">import</span> matplotlib<span class="sh_symbol">.</span>pyplot as plt</p></li><li data-node-id="20211129234602-70v5906"><p>plt<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_number">3</span><span class="sh_symbol">])</span></p></li><li><p><span class="sh_comment">#现在创建一个子图，它表示一个有2行1列的网格的顶部图。</span></p></li><li data-node-id="20211129234602-7ff8cqn"><p><span class="sh_comment">#因为这个子图将与第一个重叠，所以之前创建的图将被删除</span></p></li><li><p>plt<span class="sh_symbol">.</span><span class="sh_function">subplot</span><span class="sh_symbol">(</span><span class="sh_number">211</span><span class="sh_symbol">)</span></p></li><li data-node-id="20211129234602-lxey8sd"><p>plt<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">(</span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">12</span><span class="sh_symbol">))</span></p></li><li><p><span class="sh_comment">#创建带有黄色背景的第二个子图</span></p></li><li data-node-id="20211129234602-znivadn"><p>plt<span class="sh_symbol">.</span><span class="sh_function">subplot</span><span class="sh_symbol">(</span><span class="sh_number">212</span><span class="sh_symbol">,</span> facecolor<span class="sh_symbol">=</span><span class="sh_string">'y'</span><span class="sh_symbol">)</span></p></li><li><p>plt<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">(</span><span class="sh_function">range</span><span class="sh_symbol">(</span><span class="sh_number">12</span><span class="sh_symbol">))</span></p></li></ol></pre>

上述代码运行结果，如下图所示：

![subplot函数绘制子图](http://c.biancheng.net/uploads/allimg/210907/12534K029-1.gif)
图2：subplot绘制结果

如果不想覆盖之前的图，需要使用 add_subplot() 函数，代码如下：

<pre class="python sh_python snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><p><span class="sh_preproc">import</span> matplotlib<span class="sh_symbol">.</span>pyplot as plt</p></li><li data-node-id="20211129234602-yeehkga"><p>fig <span class="sh_symbol">=</span> plt<span class="sh_symbol">.</span><span class="sh_function">figure</span><span class="sh_symbol">()</span></p></li><li><p>ax1 <span class="sh_symbol">=</span> fig<span class="sh_symbol">.</span><span class="sh_function">add_subplot</span><span class="sh_symbol">(</span><span class="sh_number">111</span><span class="sh_symbol">)</span></p></li><li data-node-id="20211129234602-y36no5p"><p>ax1<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_number">3</span><span class="sh_symbol">])</span></p></li><li><p>ax2 <span class="sh_symbol">=</span> fig<span class="sh_symbol">.</span><span class="sh_function">add_subplot</span><span class="sh_symbol">(</span><span class="sh_number">221</span><span class="sh_symbol">,</span> facecolor<span class="sh_symbol">=</span><span class="sh_string">'y'</span><span class="sh_symbol">)</span></p></li><li data-node-id="20211129234602-p0v53p9"><p>ax2<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">([</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_number">3</span><span class="sh_symbol">])</span></p></li></ol></pre>

执行上述代码，输出结果如下：

![subplot绘图函数](http://c.biancheng.net/uploads/allimg/210907/12534J423-2.gif)
图3：add_subplot()绘图结果

通过给画布添加 axes 对象可以实现在同一画布中插入另外的图像。

<pre class="python sh_python snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><p><span class="sh_preproc">import</span> matplotlib<span class="sh_symbol">.</span>pyplot as plt</p></li><li data-node-id="20211129234602-863sdqv"><p><span class="sh_preproc">import</span> numpy as np</p></li><li><p><span class="sh_preproc">import</span> math</p></li><li data-node-id="20211129234602-ubv3zhp"><p>x <span class="sh_symbol">=</span> np<span class="sh_symbol">.</span><span class="sh_function">arange</span><span class="sh_symbol">(</span><span class="sh_number">0</span><span class="sh_symbol">,</span> math<span class="sh_symbol">.</span>pi<span class="sh_symbol">*</span><span class="sh_number">2</span><span class="sh_symbol">,</span> <span class="sh_number">0.05</span><span class="sh_symbol">)</span></p></li><li><p>fig<span class="sh_symbol">=</span>plt<span class="sh_symbol">.</span><span class="sh_function">figure</span><span class="sh_symbol">()</span></p></li><li data-node-id="20211129234602-hsq2dwy"><p>axes1 <span class="sh_symbol">=</span> fig<span class="sh_symbol">.</span><span class="sh_function">add_axes</span><span class="sh_symbol">([</span><span class="sh_number">0.1</span><span class="sh_symbol">,</span> <span class="sh_number">0.1</span><span class="sh_symbol">,</span> <span class="sh_number">0.8</span><span class="sh_symbol">,</span> <span class="sh_number">0.8</span><span class="sh_symbol">])</span> <span class="sh_comment"># main axes</span></p></li><li><p>axes2 <span class="sh_symbol">=</span> fig<span class="sh_symbol">.</span><span class="sh_function">add_axes</span><span class="sh_symbol">([</span><span class="sh_number">0.55</span><span class="sh_symbol">,</span> <span class="sh_number">0.55</span><span class="sh_symbol">,</span> <span class="sh_number">0.3</span><span class="sh_symbol">,</span> <span class="sh_number">0.3</span><span class="sh_symbol">])</span> <span class="sh_comment"># inset axes</span></p></li><li data-node-id="20211129234602-fuj9rbe"><p>y <span class="sh_symbol">=</span> np<span class="sh_symbol">.</span><span class="sh_function">sin</span><span class="sh_symbol">(</span>x<span class="sh_symbol">)</span></p></li><li><p>axes1<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span> y<span class="sh_symbol">,</span> <span class="sh_string">'b'</span><span class="sh_symbol">)</span></p></li><li data-node-id="20211129234602-efh946z"><p>axes2<span class="sh_symbol">.</span><span class="sh_function">plot</span><span class="sh_symbol">(</span>x<span class="sh_symbol">,</span>np<span class="sh_symbol">.</span><span class="sh_function">cos</span><span class="sh_symbol">(</span>x<span class="sh_symbol">),</span><span class="sh_string">'r'</span><span class="sh_symbol">)</span></p></li><li><p>axes1<span class="sh_symbol">.</span><span class="sh_function">set_title</span><span class="sh_symbol">(</span><span class="sh_string">'sine'</span><span class="sh_symbol">)</span></p></li><li data-node-id="20211129234602-uaellhf"><p>axes2<span class="sh_symbol">.</span><span class="sh_function">set_title</span><span class="sh_symbol">(</span><span class="sh_string">"cosine"</span><span class="sh_symbol">)</span></p></li><li><p>plt<span class="sh_symbol">.</span><span class="sh_function">show</span><span class="sh_symbol">()</span></p></li></ol></pre>

输出结果如下：![matplotlib绘图](http://c.biancheng.net/uploads/allimg/210907/12534H458-3.gif)
